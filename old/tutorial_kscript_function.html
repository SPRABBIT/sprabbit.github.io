<!DOCTYPE html>
<html>

<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
	<title>函数 - KScript 教程</title>
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta name="keywords" content="同人游戏,同人社团,游戏引擎,Galgame,AVG,SpeShow,SPRABBIT,SPENGINE,galgame引擎" />
	<meta name="description" content="同人社团SPRABBIT-超科学兔耳中队是一个专注于技术创新的中文同人社团" />

	<link rel="icon" href="favicon.png">
	<link rel="stylesheet" href="http://cdn.bootcss.com/bootstrap/3.2.0/css/bootstrap.min.css">
	<link rel="stylesheet" href="http://cdn.bootcss.com/bootstrap/3.2.0/css/bootstrap-theme.min.css">

	<!-- syntax highlighting CSS -->
	<link rel="stylesheet" href="/css/syntax.css">
	<link rel="stylesheet" href="/css/custom.css">
	<link rel="stylesheet" href="/css/shCore.css" type="text/css" />
	<link rel="stylesheet" href="/css/shThemeDefault.css" type="text/css" />
	<!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
	<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
	<!--[if lt IE 9]>
      <script src="http://cdn.bootcss.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="http://cdn.bootcss.com/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
</head>

<body data-spy="scroll" data-target=".navbar">
	<div class="navbar navbar-inverse" role="navigation">
		<div class="container">
			<div class="navbar-header">
				<button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target=".navbar-collapse">
					<span class="sr-only">Toggle navigation</span>
					<span class="icon-bar"></span>
					<span class="icon-bar"></span>
					<span class="icon-bar"></span>
				</button>
				<a href="/">
					<img src="/images/logo_speshow_long_xs.png">
				</a>
			</div>
			<div class="collapse navbar-collapse">
				<ul class="nav navbar-nav">
					<li class="active"><a href="/spengine/">简介</a>
					</li>
					<li><a href="/spengine/tutorial.html">文档</a>
					</li>
					<li><a href="/spengine/authors.html">关于</a>
					</li>
				</ul>
			</div>
			<!--/.nav-collapse -->
		</div>
	</div>

	<div class="container">
		<div class="row">
	<div class="col-md-3">
		<div data-spy="affix" data-offset-top="70" data-offset-bottom="200" class="navbar hidden-print hidden-xs hidden-sm affix-top" role="complementary">
			<ul class="nav sidebar">
	<li><a href="index.html">SpeShow 简介</a>
	</li>
	<li><a href="spengine.html">SPENGINE 简介</a>
	</li>
	<li><a href="why_speshow.html">为什么使用 SpeShow </a>
	</li>
	<li><a href="license.html">使用许可</a>
	</li>
	<li><a href="authors.html">作者 &amp; 招募</a>
	</li>
	<li>
		<a href="download.html">下载</a>
		<ul class="nav">
			<li><a href="download.html">SpeShow</a>
			</li>
			<li><a href="editor.html">KScript Editor</a>
			</li>
			<li><a href="pack_guider.html">SSPackGuider</a>
			</li>
		</ul>
	</li>
	<li>
		<a href="tutorial.html">教程</a>
		<ul class="nav">
			<li><a href="tutorial_deploy.html">部署 SpeShow</a>
			</li>
			<li>
				<a href="tutorial_kscript.html">KScript</a>
				<ul class="nav">
					<li><a href="#tutorial_kscript_comment">注释</a>
					</li>
					<li><a href="#tutorial_kscript_variable">变量</a>
					</li>
					<li><a href="#tutorial_kscript_operation">运算</a>
					</li>
					<li><a href="#tutorial_kscript_function">函数</a>
					</li>
					<li><a href="#tutorial_kscript_branch">分支</a>
					</li>
					<li><a href="#tutorial_kscript_loop">循环</a>
					</li>
					<li><a href="#tutorial_kscript_include">include 函数</a>
					</li>
					<li><a href="#tutorial_kscript_speshow">KScript 与 SpeShow</a>
					</li>
				</ul>
			</li>
			<li>
				<a href="tutorial_standard.html">基本指令</a>
				<ul class="nav">
					<li><a href="tutorial_standard_screen.html">屏幕</a>
					</li>
					<li><a href="tutorial_standard_component.html">基本UI组件</a>
					</li>
					<li><a href="tutorial_standard_textbox.html">文字框</a>
					</li>
					<li><a href="tutorial_standard_picturebox.html">图片框</a>
					</li>
					<li><a href="tutorial_standard_list.html">列表</a>
					</li>
					<li><a href="tutorial_standard_wait.html">等待</a>
					</li>
					<li><a href="tutorial_standard_exit.html">退出</a>
					</li>
					<li><a href="tutorial_standard_sample.html">示例</a>
					</li>
				</ul>
			</li>
			<li>
				<a href="tutorial_advanced.html">进阶指令</a>
				<ul class="nav">
					<li><a href="tutorial_advanced_switch.html">切换</a>
					</li>
					<li><a href="tutorial_advanced_sound.html">声音</a>
					</li>
					<li><a href="tutorial_advanced_video.html">视频</a>
					</li>
					<li><a href="tutorial_advanced_effect.html">特效</a>
					</li>
					<li><a href="tutorial_advanced_animation.html">动画</a>
					</li>
					<li><a href="tutorial_advanced_particlesystem.html">粒子系统</a>
					</li>
					<li><a href="tutorial_advanced_capture.html">截图</a>
					</li>
					<li><a href="tutorial_advanced_save.html">存档</a>
					</li>
					<li><a href="tutorial_advanced_skip.html">跳过</a>
					</li>
					<li><a href="tutorial_advanced_texteffect.html">文字特效</a>
					</li>
					<li><a href="tutorial_advanced_dialogbox.html">AVG专用组件：对话框</a>
					</li>
				</ul>
			</li>
			<li>
				<a href="tutorial_senior.html">高级指令</a>
				<ul class="nav">
					<li><a href="tutorial_senior_pre.html">预执行脚本</a>
					</li>
					<li><a href="tutorial_senior_inner.html">内部脚本</a>
					</li>
					<li><a href="tutorial_senior_listener.html">事件响应脚本</a>
					</li>
					<li><a href="tutorial_senior_jump.html">跳转脚本</a>
					</li>
				</ul>
			</li>
			<li><a href="tutorial_professional.html">高级用途</a>
			</li>
			<li><a href="tutorial_commands.html">指令索引</a>
			</li>
			<li><a href="tutorial_sample.html">示例</a>
			</li>
		</ul>
	</li>
	<li> <a href="show.html">演示</a>
	</li>
	<li> <a href="donate.html">捐赠</a>
	</li>
	<li> <a href="QA.html">FAQ</a>
	</li>
</ul>

		</div>
	</div>
	<div class="col-md-9" role="main">
		<h2>函数</h2>

<p>KScript 的函数基本上是引擎系统函数，用于调用引擎内部对应的函数方法。</p>

<h3>调用函数</h3>

<p>KScript 调用函数的格式如下：</p>

<pre class="brush:ks">  
// 标准格式     
@函数名1{ 参数名1:参数值1 , 参数名2:参数值2 , ... };
@函数名2{ 
    参数名1:值1,
    参数名2:值2,
    ...
};

// 省略格式（省略逗号及分号）
@函数名1{ 参数名1:参数值1 参数名2:参数值2 ... }
@函数名2{ 
    参数名1:值1 
    参数名2:值2 
    ... 
}

// 最简格式（省略参数列表）
@函数名;
</pre>

<p>因为这些函数都以“@”开头，所以 KScript 中的函数又称“AT函数”。SpeShow 的引擎系统函数，及其参数名列表将在其他章节中描述。</p>

<h3>自定义函数</h3>

<p>这里的自定义与其他语言的定义函数有很大区别。这里的自定义，意思是执行一段脚本，其中某些变量的值可以指定。自定义函数并没有产生新的引擎系统函数，只是将一些脚本语句与函数组合起来。</p>

<p>自定义函数的格式如下：</p>

<pre class="brush:ks">  
// 标准格式     
@自定义函数名(参数名1, 参数名2, ...)
{[
    // 在这里写脚本，函数将返回最后脚本最后一行的值
]};


// 省略格式（省略参数列表及分号）
@自定义函数名()
{
    // 在这里写脚本
}
</pre>

<p>函数有两种，在 0.9 版本之前的KScript，函数脚本实际上是一个包含脚本内容的字符串，因此可以用&quot;[]&quot;包含，当然也可以用英文单引号或双引号。其中自定义函数名的命名规则跟变量的命名规则相同。</p>

<p><em>SpeShow 0.9</em> 版本之后，函数是真正意义上的函数，并不是脚本字符串，并且所以不再需要用“[]”包含，并且可以用return返回值</p>

<p>调用自定义函数时，格式和调用其他引擎系统函数的格式一样：</p>

<pre class="brush:ks">  
// 标准格式
@自定义函数名{ 
    自定参数1:值1,
    自定参数2:值2,
    ...
};

// 省略格式（省略逗号及分号）
@自定义函数名{ 
    自定参数1:值1 
    自定参数2:值2 
    ... 
}

// 最简格式（省略参数列表，无任何参数传入）
@自定义函数名;
</pre>

<p>调用自定义函数时，将会执行一次定义好的脚本，执行之前将会按照参数列表的设置，初始化各变量。<em>各参数按值传入</em>，函数内的变量为<em>局部变量</em>，不会影响函数外的变量。调用自定义函数的参数列表与定义函数时的参数列表并<em>无直接关系</em>，定义时指定参数列表仅仅是为了注释，因此定义函数时可以完全省略参数列表。</p>

<p>下面是一个例子：</p>

<pre class="brush:ks">  
// 定义一种由三个数参与的运算
@自定义运算(参数1, 参数2, 参数3)
{ 
    return 参数1 + 参数2 * 参数3;
}

// 调用自定义运算
结果 = @自定义运算{ 
    参数1: 1 
    参数2: 2 
    参数3: 3
}

// 这时变量“结果”的值为整数7（函数内的变量为局部变量）
</pre>

<hr>

<p><a href="tutorial_kscript_operation.html">上一节：运算</a></p>

<p><a href="tutorial_kscript_branch.html">下一节：分支</a></p>

	</div>	
</div>

	</div>
	<!-- /.container -->

	<div role="contentinfo" class="footer">
		<div class="container">
			<p>
				
			</p>
		</div>
	</div>
</body>

<script src="http://cdn.bootcss.com/jquery/1.11.1/jquery.min.js"></script>
<script src="http://cdn.bootcss.com/bootstrap/3.2.0/js/bootstrap.min.js"></script>


<script type="text/javascript" src="/js/shCore.js"></script>

<script type="text/javascript" src="/js/shBrushXML.js"></script>

<script type="text/javascript" src="/js/shBrushKScript.js"></script>

<script type="text/javascript" src="/js/highlight.js"></script>

<script type="text/javascript" src="/js/baidu_tongji.js"></script>

</html>
