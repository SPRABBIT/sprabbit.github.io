<!DOCTYPE html>
<html>

<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
	<title>基本指令（UI布局） - SpeShow 教程</title>
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta name="keywords" content="同人游戏,同人社团,游戏引擎,Galgame,AVG,SpeShow,SPRABBIT,SPENGINE,galgame引擎" />
	<meta name="description" content="同人社团SPRABBIT-超科学兔耳中队是一个专注于技术创新的中文同人社团" />

	<link rel="icon" href="favicon.png">
	<link rel="stylesheet" href="http://cdn.bootcss.com/bootstrap/3.2.0/css/bootstrap.min.css">
	<link rel="stylesheet" href="http://cdn.bootcss.com/bootstrap/3.2.0/css/bootstrap-theme.min.css">

	<!-- syntax highlighting CSS -->
	<link rel="stylesheet" href="/css/syntax.css">
	<link rel="stylesheet" href="/css/custom.css">
	<link rel="stylesheet" href="/css/shCore.css" type="text/css" />
	<link rel="stylesheet" href="/css/shThemeMidnight.css" type="text/css" />
	<link rel="stylesheet" href="/css/spengine.css" type="text/css" />
	<!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
	<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
	<!--[if lt IE 9]>
      <script src="http://cdn.bootcss.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="http://cdn.bootcss.com/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
</head>

	<body data-spy="scroll" data-target=".navbar">
	<div class="navbar navbar-inverse navbar-static-top" role="navigation">
		<div class="container">
			<div class="navbar-header">
				<a href="/spengine/">
					<img src="/images/logo_speshow_long_xs.png">
				</a>
			</div>
			<div class="collapse navbar-collapse">
				<ul class="nav navbar-nav">
					<li><a href="/spengine/">简介</a>
					</li>
					<li><a href="/spengine/tutorial.html">文档</a>
					</li>
					<li><a href="/spengine/authors.html">关于</a>
					</li>
					<li><a href="/speshow/">新版</a>
					</li>
				</ul>
			</div>
			<!--/.nav-collapse -->
		</div>
	</div>

	<div class="container">
		<div class="row">
			<div class="col-md-3">
				<div data-spy="affix" data-offset-top="70" class="navbar hidden-print hidden-xs hidden-sm affix-top" role="complementary">
					<ul class="nav sidebar">
	
	<li class="warn-old-doc">
		<a href="/speshow/">
			此为旧版文档(KS版本)<br/>
			点击这里查看新版(JS版本)
		</a>
	</li>
	<li><a href="index.html">SpeShow 简介</a>
	</li>
	<li><a href="spengine.html">SPENGINE 简介</a>
	</li>
	<li><a href="why_speshow.html">为什么使用 SpeShow </a>
	</li>
	<li><a href="license.html">使用许可</a>
	</li>
	<li><a href="authors.html">作者 &amp; 招募</a>
	</li>
	<li>
		<a href="download.html">下载</a>
		<ul class="nav">
			<li><a href="download.html">SpeShow</a>
			</li>
			<li><a href="editor.html">KScript Editor</a>
			</li>
			<li><a href="pack_guider.html">SSPackGuider</a>
			</li>
		</ul>
	</li>
	<li>
		<a href="tutorial.html">教程</a>
		<ul class="nav">
			<li><a href="tutorial_deploy.html">部署 SpeShow</a>
			</li>
			<li>
				<a href="tutorial_kscript.html">KScript</a>
				<ul class="nav">
					<li><a href="tutorial_kscript_comment.html">注释</a>
					</li>
					<li><a href="tutorial_kscript_variable.html">变量</a>
					</li>
					<li><a href="tutorial_kscript_operation.html">运算</a>
					</li>
					<li><a href="tutorial_kscript_function.html">函数</a>
					</li>
					<li><a href="tutorial_kscript_branch.html">分支</a>
					</li>
					<li><a href="tutorial_kscript_loop.html">循环</a>
					</li>
					<li><a href="tutorial_kscript_include.html">include 函数</a>
					</li>
					<li><a href="tutorial_kscript_speshow.html">KScript 与 SpeShow</a>
					</li>
				</ul>
			</li>
			<li>
				<a href="tutorial_standard.html">基本指令</a>
				<ul class="nav">
					<li><a href="tutorial_standard_screen.html">屏幕</a>
					</li>
					<li><a href="tutorial_standard_component.html">基本UI组件</a>
					</li>
					<li><a href="tutorial_standard_textbox.html">文字框</a>
					</li>
					<li><a href="tutorial_standard_picturebox.html">图片框</a>
					</li>
					<li><a href="tutorial_standard_list.html">列表</a>
					</li>
					<li><a href="tutorial_standard_wait.html">等待</a>
					</li>
					<li><a href="tutorial_standard_exit.html">退出</a>
					</li>
					<li><a href="tutorial_standard_sample.html">示例</a>
					</li>
				</ul>
			</li>
			<li>
				<a href="tutorial_advanced.html">进阶指令</a>
				<ul class="nav">
					<li><a href="tutorial_advanced_switch.html">切换</a>
					</li>
					<li><a href="tutorial_advanced_sound.html">声音</a>
					</li>
					<li><a href="tutorial_advanced_video.html">视频</a>
					</li>
					<li><a href="tutorial_advanced_effect.html">特效</a>
					</li>
					<li><a href="tutorial_advanced_animation.html">动画</a>
					</li>
					<li><a href="tutorial_advanced_particlesystem.html">粒子系统</a>
					</li>
					<li><a href="tutorial_advanced_capture.html">截图</a>
					</li>
					<li><a href="tutorial_advanced_save.html">存档</a>
					</li>
					<li><a href="tutorial_advanced_skip.html">跳过</a>
					</li>
					<li><a href="tutorial_advanced_texteffect.html">文字特效</a>
					</li>
					<li><a href="tutorial_advanced_dialogbox.html">AVG专用组件：对话框</a>
					</li>
				</ul>
			</li>
			<li>
				<a href="tutorial_senior.html">高级指令</a>
				<ul class="nav">
					<li><a href="tutorial_senior_pre.html">预执行脚本</a>
					</li>
					<li><a href="tutorial_senior_inner.html">内部脚本</a>
					</li>
					<li><a href="tutorial_senior_listener.html">事件响应脚本</a>
					</li>
					<li><a href="tutorial_senior_jump.html">跳转脚本</a>
					</li>
				</ul>
			</li>
			<li><a href="tutorial_professional.html">高级用途</a>
			</li>
			<li><a href="tutorial_commands.html">指令索引</a>
			</li>
			<li><a href="tutorial_sample.html">示例</a>
			</li>
		</ul>
	</li>
	<li> <a href="show.html">演示</a>
	</li>
	<li> <a href="donate.html">捐赠</a>
	</li>
	<li> <a href="QA.html">FAQ</a>
	</li>
</ul>

				</div>
			</div>
			<div class="col-md-9 content-main" role="main">
				<h2>基本指令（UI布局）</h2>

<p>本节开始，将介绍 SpeShow 的引擎系统函数。您可能需要动手编写 KScript 脚本了。<a href="editor.html">我推荐您使用 Notepad++ 作为您的代码编辑器</a>，因为我为他添加了 KSctipt 的语法高亮支持。</p>

<p>本节将介绍以下内容：</p>

<ul>
<li><a href="#part_1">屏幕</a></li>
<li><a href="#part_2">UI组件：基本UI组件</a></li>
<li><a href="#part_3">UI组件：文字框</a></li>
<li><a href="#part_4">UI组件：图片框</a></li>
<li><a href="#part_5">UI组件：列表</a></li>
<li><a href="#part_6">等待</a></li>
<li><a href="#part_7">退出</a></li>
<li><a href="#part_8">示例</a></li>
</ul>

<hr>

<h3 id="part_1">屏幕</h3>

<p>我决定从“屏幕”（screen）开始讲起，因为屏幕是 UI 的基础，没有屏幕，什么都显示不了。虽说是叫“屏幕”，但是跟显示器荧屏是不一样的概念。在 SpeShow 里的屏幕更像是一个画布，所有的组件都将绘制到画布上，没有画布，您就不知道应该将东西画到哪了。</p>

<p>屏幕的引擎系统函数格式如下：</p>

<pre class="brush: ks">
// 完全参数列表
@screen{
    name: "屏幕名"
    pop_up: 布尔值
}

// 必要参数列表
@screen{
    name: "屏幕名"
}
</pre>

<p>本函数的功能除了创建屏幕之外，还包括把已创建的屏幕调到最前端显示。</p>

<p>参数相关说明如下：</p>

<table><tr><th>属性名</th><th>值类型</th><th>说明</th></tr><tr><td>name</td><td>字符串</td><td>屏幕的ID，应用中只允许存在一个该ID的屏幕。</td></tr><tr><td>pop_up</td><td>布尔值</td><td>屏幕是否为弹窗，若为弹窗，则其后面的屏幕将被绘制，否则不绘制其后面的屏幕。</td></tr></table>

<hr>

<h3 id="part_2">UI组件：基本UI组件</h3>

<p>UI组件是 SpeShow 演示的基本元素，每个被绘制的元素都是一个组件，或者由多个组件组成。</p>

<p>简单来说 UI 组件就是绘制在屏幕上的一个矩形，该矩形有长、宽、位置、背景图片、背景颜色等属性，就相当于 html 里的 div, DOM 里面的 DOM元素。</p>

<p>定义一个基本UI组件的引擎系统函数的格式如下:</p>

<pre class="brush: ks">
// 必要参数列表
@component{
    name:               字符串
}

// 完整参数列表
@component{
    name:               字符串
    display:            字符串
    layer:              数字
    width:              数字
    height:             数字
    x:                  数字
    y:                  数字
    // 详见下表
}
</pre>

<p>其完整参数列表很长，但是必须的仅仅是“name”属性，即组件的ID。其中一些属性以“on”或“catch”开头，这些是关于事件处理的属性，将在后面的章节中讲解，本节只讲解其他基本属性。</p>

<table><tr><th>属性名</th><th>值类型</th><th>说明</th></tr><tr><td>background_color</td><td>数字</td><td>背景颜色，用四通道十六进制数表示。</td></tr><tr><td>background_fill_mode</td><td>字符串</td><td>背景图片填充模式，可以是以下值：<ul><li>'Positioning'</li><li>'Fill'</li><li>'FitWidth'</li><li>'FitHeight'</li><li>'FitMin'</li><li>'FitMax'</li></ul>默认为'Positioning'，即根据background_position_mode定位。</td></tr><tr><td>background_image</td><td>字符串</td><td>背景图片的完整路径，包括后缀。</td></tr><tr><td>background_position_mode</td><td>字符串</td><td>背景图片位置模式，仅当background_fill_mode设置为'Positioning'时有用。可以是以下值：<ul><li>'Normal'</li><li>'TopLeft'</li><li>'TopRight'</li><li>'TopCenter'</li><li>'BottomLeft'</li><li>'BottomRight'</li><li>'BottomCenter'</li><li>'CenterLeft'</li><li>'CengerRight'</li><li>'CenterAll'</li></ul>默认为'Normal'，即根据background_x，background_y来定位。</td></tr><tr><td>background_x</td><td>数字</td><td>背景图片相对本组件左上角的水平位置。</td></tr><tr><td>background_y</td><td>数字</td><td>背景图片相对本组件左上角的垂直位置。</td></tr><tr><td>display</td><td>字符串</td><td>可以设置的值有3个：<ul><li>'unhidden'：显示被设为隐藏的组件。</li><li>'hidden'：隐藏正在显示的组件。</li><li>'toggle'：切换显示隐藏状态。</li></ul></td></tr><tr><td>father</td><td>字符串</td><td>父组件的ID。若不设置，将默认为'global_root'，即该屏幕的根组件。</td></tr><tr><td>height</td><td>数字</td><td>组件的高度，以像素为单位。</td></tr><tr><td>layer</td><td>数字</td><td>层深，为 0-255 间的数字，数字较大的层在数字较小的层前面。</td></tr><tr><td>name</td><td>字符串</td><td>组件的ID，同一个屏幕中只允许存在一个该ID的组件。</td></tr><tr><td>rotation</td><td>数字</td><td>组件绕旋转中心逆时针旋转的弧度。</td></tr><tr><td>rotation_center_x</td><td>数字</td><td>组件旋转中心相对父组件左上角的水平位置，以像素为单位。</td></tr><tr><td>rotation_center_y</td><td>数字</td><td>组件旋转中心相对父组件左上角的垂直位置，以像素为单位。</td></tr><tr><td>transparency</td><td>数字</td><td>透明度，可以是 0 - 1 之间的数。0 为全透。</td></tr><tr><td>width</td><td>数字</td><td>组件的宽度，以像素为单位。</td></tr><tr><td>x</td><td>数字</td><td>组件相对父组件左上角的水平位置，以像素为单位。</td></tr><tr><td>y</td><td>数字</td><td>组件相对父组件左上角的垂直位置，以像素为单位。</td></tr><tr><td>absolute</td><td>布尔值</td><td>是否以绝对模式绘制，默认为true。</td></tr></table>

<p>必须指定组件 ID（name），才能对属性进行设置或更改。若 <em>当前屏幕</em> 中没有以该 ID 命名的 UI 组件，则会在 <em>该屏幕</em> 创建一个新的 UI 组件并对其进行属性设置，否则将对已存在的 UI 组件进行属性设置。</p>

<p>另外，创建 UI 组件时也必须指定 width 和 height， 否则宽度和高度为0，这个组件就看不见了。</p>

<hr>

<h3 id="part_3">UI组件：文字框</h3>

<p>文字框是一种基本 UI 组件的扩展，是一种可以显示文字的 UI 组件。</p>

<p><em>所有 UI 组件都包括基本 UI 组件的属性参数，包括文字框还有接下来将提及的图片框、列表等，因此我不再重复写出这些参数及其说明。</em></p>

<p>创建或修改一个文字框的引擎系统函数的格式如下：</p>

<pre class="brush: ks">
// 必要参数列表
@textBox{
    name:               字符串
} 

// 完整参数列表（不包括基本UI组件的属性参数）
@textBox{
    name:               字符串
    padding:            数字
    line_space:         数字
    word_space:         数字
    font:               字符串
    color:              数字
    content:            字符串
    text_effect_back:   字符串
    text_effect_back_tex:字符串
    text_effect_back_level:数字
    text_effect_back_XX:数字
    text_effect_front:  字符串
    text_effect_front_tex:字符串
    text_effect_front_level:数字
    text_effect_front_XX:数字
}
</pre>

<p>其中以“text_effect”开头的属性参数，是文字特效的相关参数，将在下一节讲解。这里只讲解其他基本参数。</p>

<p>textBox的基本属性的解释如下：</p>

<table><tr><th>属性名</th><th>值类型</th><th>说明</th></tr><tr><td>name</td><td>字符串</td><td>文字框的ID，同一个屏幕中只允许存在一个该ID的组件。</td></tr><tr><td>padding</td><td>数字</td><td>文字部分离文字框边框的宽度，以像素为单位。</td></tr><tr><td>line_space</td><td>数字</td><td>行与行之间的间隙，为文字高度的百分比。</td></tr><tr><td>word_space</td><td>数字</td><td>同一行中文字与文字之间的间隙，为文字高度的百分比。</td></tr><tr><td>font</td><td>字符串</td><td>默认字体的ID，字体的创建方法见下文。</td></tr><tr><td>color</td><td>数字</td><td>默认字体颜色，4通道十六进制数表示。</td></tr><tr><td>content</td><td>字符串</td><td>设置文字框显示内容。（使用默认字体以及颜色）</td></tr></table>

<p>其中有“font”这一属性，需要填写一个已定义字体的 ID。如此，有必要介绍一下设置字体的相关函数。</p>

<h4>字体</h4>

<p>与其他地方不一样，这里的字体，并不单单是指文字的风格，还包括文字大小，文字倾斜，文字粗细这些属性。</p>

<p>设置字体的相关函数有两个。@registerFont 和 @font。前者用来注册一种系统里没有的字体文件，后者创建或是修改一种字体。</p>

<p>@registerFont 的用法很简单，格式如下：</p>

<pre class="brush: ks">
// 完整参数列表
@registerFont{ src: 字符串 } 
</pre>

<p>其参数解释如下：</p>

<table><tr><th>属性名</th><th>值类型</th><th>说明</th></tr><tr><td>src</td><td>字符串</td><td>True Type 字体文件的完整路径，包括后缀。</td></tr></table>

<p>如果您使用的是系统自带的字体，那么您可以不注册字体文件，但是您需要确保你的用户的系统中也有同样的字体。否则，您就要将该种字体放到游戏文件夹下，并使用 @registerFont 注册字体。</p>

<p>当您确定要使用的字体存在或者已经注册后，您就可以使用 @font 创建字体。</p>

<p>@font 的格式如下：</p>

<pre class="brush: ks">
// 必要参数列表
@font{
    name:               字符串
} 

// 完整参数列表
@font{
    name:               字符串
    size:               数字
    font:               字符串
    weight:             数字
    italic:             布尔值
} 
</pre>

<p>其参数解释如下：</p>

<table><tr><th>属性名</th><th>值类型</th><th>说明</th></tr><tr><td>name</td><td>字符串</td><td>字体的ID，程序中只允许存在一个该ID的字体。</td></tr><tr><td>size</td><td>数字</td><td>文字大小。</td></tr><tr><td>font</td><td>字符串</td><td>字体名称（不是字体文件名）。</td></tr><tr><td>weight</td><td>数字</td><td>字体粗细，可以是 0 - 9 间的数值，或者对应的粗细描述字符串：<ul><li>0：'DontCare'</li><li>1：'Thin'</li><li>2：'ExtraLight' / 'UltraLight'</li><li>3：'Light'</li><li>4：'Normal' / 'Regular'</li><li>5：'Medium'</li><li>6：'SemiBold' / 'DemiBold'</li><li>7：'Bold'</li><li>8：'ExtraBold' / 'UltraBold'</li><li>9：'Heavy' / 'Black'</li></ul></td></tr><tr><td>italic</td><td>布尔值</td><td>是否为斜体字。</td></tr></table>

<h4>修改文字框文字</h4>

<p>修改文字框文字，除了使用 @textBox 的 content 属性，还可以使用 @addText 和 @clearText 两个函数。实际上因为 @textBox 的 content 属性不能设置不同于默认字体的字体，所以一般不使用。</p>

<p>@addText 函数可以在指定的文本框的文字内容后面增加新的文字内容，格式如下：</p>

<pre class="brush: ks">
// 必要参数列表
@addText{
    // 无
} 

// 完整参数列表
@addText{
    box:                字符串
    color:              数字
    font:               字符串
    content:            字符串
    effect_back:        字符串
    effect_back_tex:    字符串
    effect_back_level:  数字
    effect_back_XX:     数字
    effect_front:       字符串
    effect_front_tex:   字符串
    effect_front_level: 数字
    effect_front_XX:    数字
} 
</pre>

<p>@clearText 函数可以清楚指定的文本框的文字内容，并替换为新的文字内容，格式如下：</p>

<pre class="brush: ks">
// 必要参数列表
@clearText{
    // 无
} 

// 完整参数列表
@clearText{
    box:                字符串
    color:              数字
    font:               字符串
    content:            字符串
    effect_back:        字符串
    effect_back_tex:    字符串
    effect_back_level:  数字
    effect_back_XX:     数字
    effect_front:       字符串
    effect_front_tex:   字符串
    effect_front_level: 数字
    effect_front_XX:    数字
} 
</pre>

<p>两个函数的参数列表都是一致的，区别只在于 @addText 用于添加文字， @clearText 用于替换文字。其中以“effect”开头的参数用于设置文字的特效，将在下一节中介绍。其余参数的说明如下：</p>

<table><tr><th>属性名</th><th>值类型</th><th>说明</th></tr><tr><td>box</td><td>字符串</td><td>目标文字框的ID，默认则为上次操作的文字框。</td></tr><tr><td>color</td><td>数字</td><td>默认字体颜色，4通道十六进制数表示。</td></tr><tr><td>font</td><td>字符串</td><td>字体ID。</td></tr><tr><td>content</td><td>字符串</td><td>文字内容。</td></tr></table>

<p>如此便可以修改文字框的内容了。</p>

<hr>

<h3 id="part_4">UI组件：图片框</h3>

<p>虽然普通的 UI 组件已经可以实现用背景显示图片，但是其不能实现一些诸如图像变换等特效。于是我们引入了图片框。图片框也是 UI 组件，所以其包含基本 UI 组件的所有属性，在此不再重复。</p>

<p>设置或修改一个图片框的格式为：</p>

<pre class="brush: ks">
// 必要参数列表
@pictureBox{
    name:               字符串
} 

// 完整参数列表（不包括基本UI组件参数）
@pictureBox{
    name:               字符串
    picture:            字符串
    fill_mode:          字符串
    position_mode:      字符串
    position_x:         数字
    position_y:         数字
} 
</pre>

<p>pictureBox的基本属性的解释如下：</p>

<table><tr><th>属性名</th><th>值类型</th><th>说明</th></tr><tr><td>name</td><td>字符串</td><td>图片框的 ID，同一个屏幕中只允许存在一个该ID的组件。</td></tr><tr><td>picture</td><td>字符串</td><td>需要显示的图片 ID。图片的定义方法见下文。</td></tr><tr><td>fill_mode</td><td>数字</td><td>图片填充模式，可以是以下值：<ul><li>'Positioning'</li><li>'Fill'</li><li>'FitWidth'</li><li>'FitHeight'</li><li>'FitMin'</li><li>'FitMax'</li><li>'ResizeBox'</li></ul>默认为'Positioning'，即根据position_mode定位。</td></tr><tr><td>position_mode</td><td>数字</td><td>图片位置模式，仅当fill_mode设置为'Positioning'时有用。可以是以下值：  <ul>  <li>'Normal'</li>  <li>'TopLeft'</li>  <li>'TopRight'</li> <li>'TopCenter'</li>  <li>'BottomLeft'</li>  <li>'BottomRight'</li>  <li>'BottomCenter'</li>  <li>'CenterLeft'</li>  <li>'CengerRight'</li> <li>'CenterAll'</li>  </ul>  默认为'Normal'，即根据position_x、position_y定位。</td></tr><tr><td>position_x</td><td>数值</td><td>图片相对图片框左上角的水平位置。</td></tr><tr><td>position_y</td><td>数值</td><td>图片相对图片框左上角的垂直位置。</td></tr></table>

<p>其中图片并不是指定一个文件，而是一个picture对象，一个picture对象是一个列图片，包括一个基图，以及一系列混合图。我们通过@picture函数来设置一个picture对象。</p>

<p>@picture的语法如下：</p>

<pre class="brush: ks">
// 必要参数列表
@picture{
    name:   字符串
}

// 完整参数列表
@picture{
    name:   字符串
    src:    字符串
    row:    数字
    col:    数字
    fps:    数字
    video:  字符串
    particle_system: 字符串
}
</pre>

<p>其参数说明如下：</p>

<table><tr><th>属性名</th><th>值类型</th><th>说明</th></tr><tr><td>name</td><td>字符串</td><td>图像的ID，整个程序有且只有一个该ID的图像。</td></tr><tr><td>src</td><td>字符串</td><td>基图像的文件路径，包括后缀。</td></tr><tr><td>row</td><td>数字</td><td>精灵动画行数。仅当src属性有值时有效。</td></tr><tr><td>col</td><td>数字</td><td>精灵动画列数。仅当src属性有值时有效。</td></tr><tr><td>fps</td><td>数字</td><td>精灵动画帧率。仅当src属性有值时有效。</td></tr><tr><td>video</td><td>字符串</td><td>视频的ID。视频的定义方法在下一节。</td></tr><tr><td>particle_system</td><td>字符串</td><td>粒子系统的ID。粒子系统的定义方法在下一节。</td></tr></table>

<p>其中src和video还有particle_system属性只能填一个，因为picture要不展示一幅图，要不展示一个视频，要不展示一个粒子系统。若填了src，则可以设置row、col、fps属性的值，一旦这些属性之一被设置，该图像会产生一个精灵动画，此时传入的图像应是一个由row行col列图片拼接而成的一个图片，picture会根据fps来更新显示的图片，从而产生动画效果。</p>

<p>设置了一个picture对象之后，我们可以使用@mixPicture函数叠加一幅图像到已设置的picture之上。</p>

<p>@mixPicture的语法如下：</p>

<pre class="brush: ks">
// 必要参数列表
@mixPicture{
    // 无
}

// 完整参数列表
@mixPicture{
    target: 字符串
    src:    字符串
    layer:  数字
    row:    数字
    col:    数字
    fps:    数字
    mix_mode:字符串
}
</pre>

<p>其参数说明如下：</p>

<table><tr><th>属性名</th><th>值类型</th><th>说明</th></tr><tr><td>target</td><td>字符串</td><td>叠加目标图像的ID。</td></tr><tr><td>src</td><td>字符串</td><td>叠加图片的文件路径，包括后缀。</td></tr><tr><td>row</td><td>数字</td><td>叠加图片的精灵动画行数。仅当src属性有值时有效。</td></tr><tr><td>col</td><td>数字</td><td>叠加图片的精灵动画列数。仅当src属性有值时有效。</td></tr><tr><td>fps</td><td>数字</td><td>叠加图片的精灵动画帧率。仅当src属性有值时有效。</td></tr><tr><td>layer</td><td>数字</td><td>叠加图片所在层数，层数从0-255，层数越高，叠加图片越靠近顶端。同一层只允许存在一张叠加图片。</td></tr><tr><td>mix_mode</td><td>字符串</td><td>叠加图片的叠加模式，目前可以使用以下自带模式，如果您熟悉Photoshop，那么您应该熟知他们的意义：<ul><li>'Mask'</li><li>'ColorBurn'</li><li>'ColorDodge'</li><li>'Darken'</li><li>'Difference'</li><li>'Exclusion'</li>    <li>'Hard'</li> <li>'HardLight'</li>    <li>'Lighten'</li>  <li>'LinearBurn'</li><li>'LinearDodge'</li><li>'LinearLight'</li><li>'Multiply'</li><li>'Normal'</li>       <li>'Overlay'</li><li>'PinLight'</li><li>'Screen'</li>   <li>'SoftLight'</li>    <li>'VividLight'</li></ul>或者输入MixMode文件的完整路径，MixMode文件的写法不在本节讨论范围内。</td></tr></table>

<p>于是我们可以通过 @picture 函数创建一个基图像，然后使用 @mixPicture  函数向其上面叠加一幅图像，生成一种独特的效果。注意一点，这里的 <em>mixPicture 的图像大小最好跟 picture 的图像大小一致</em>，否则 mixPicture 将会被拉伸至 picture 大小后再进行叠加。</p>

<p>当您设置好 picture 和 mixPicture 后，您就可以指定 pictureBox 中的 picture 属性了。</p>

<hr>

<h3 id="part_5">UI组件：列表</h3>

<p>列表是基本UI组件的一种扩展，在其中的子组件，将会按照水平方向或垂直方向和层深的顺序进行排列，子组件之间不会发生重叠，就像一个表一样，把需要展示的内容都陈列出来。</p>

<p>创建或修改列表的格式为：</p>

<pre class="brush: ks">
// 必要参数列表
@list{
    name:   字符串
}

// 完整参数列表（不包含基本UI的参数列表）
@list{
    name:   字符串
    scroll_position:    数字
    scroll_position_delta:数字
    scroll_delta:       数字
    max_item:   数字
    direction:  字符串
    clear:  布尔值
}
</pre>

<p>其参数说明如下：</p>

<table><tr><th>属性名</th><th>值类型</th><th>说明</th></tr><tr><td>name</td><td>字符串</td><td>列表的ID，整个屏幕有且只有一个该ID的UI组件。</td></tr><tr><td>scroll_position</td><td>数字</td><td>滚动到该位置，为0 - 1之间的浮点数。</td></tr><tr><td>scroll_position_delta</td><td>数字</td><td>滚动距离，为-1 - 1之间的浮点数。</td></tr><tr><td>scroll_delta</td><td>数字</td><td>滚动距离，以像素为单位。</td></tr><tr><td>max_item</td><td>数字</td><td>列表最大容量。</td></tr><tr><td>direction</td><td>字符串</td><td>列表方向，可以是'Vertical'（垂直向下）或 'Horizontal'（水平向右）</td></tr><tr><td>clear</td><td>布尔值</td><td>是否清除列表元素。</td></tr></table>

<p>在创建了列表之后，就可以通过指定子组件的 father 属性到列表ID的方法添加列表元素，此时子组件的 x，y 属性表示的是相对上一个子组件的末端的位移。</p>

<hr>

<h3 id="part_6">等待</h3>

<p>如果您只使用以上提及的命令，那么您的程序将只显示最终的结果。因为程序在一瞬间便将您输入的所有引擎系统命令执行完毕。</p>

<p>如果你需要让你的命令逐个执行，而且命令与命令之间有时间间隔，那么您需要使用等待命令。等待命令包括 @waitClick 和 @waitTime 还有下一节才会使用到的 @waitDialog。</p>

<h4>waitClick</h4>

<p>顾名思义，就是等待鼠标左键点击，当程序遇到此命令时会暂停继续执行，直到用户点击鼠标。</p>

<p>@waitClick 的格式如下：</p>

<pre class="brush: ks">
// 最简形式
@waitClick;

// 完整参数列表
@waitClick{component:"组件名"};
</pre>

<table><tr><th>属性名</th><th>值类型</th><th>说明</th></tr><tr><td>component</td><td>字符串</td><td>等待鼠标点击的组件名。</td></tr></table>

<p><em>仅0.8.6 以后版本支持component参数</em>，填写该参数将以该component为基准等待鼠标点击，即类似取代该component的catch_click响应脚本，只有被该组件捕获到鼠标点击，才能结束等待。若不填写component，则该waitClick拦截所有鼠标点击，即其他组件不可能获取到鼠标点击。</p>

<h4>waitTime</h4>

<p>顾名思义，就是等待一段时间，当程序遇到此命令时会暂停继续执行，直到经过所设置的时间。</p>

<p>@waitTime 的格式如下：</p>

<pre class="brush: ks">
// 完整参数列表
@waitTime{ 
    time:       数值
}
</pre>

<p>其参数说明如下：</p>

<table><tr><th>属性名</th><th>值类型</th><th>说明</th></tr><tr><td>time</td><td>数字</td><td>浮点数，等待的时间，以秒为单位。</td></tr></table>

<h4>wait</h4>

<p>@wait包括了上述两个函数的功能，只要满足其一，就会停止等待。</p>

<p>@wait 的格式如下：</p>

<pre class="brush: ks">
// 完整参数列表
@wait{ 
    time:       数值
    click:      布尔值
    component:  组件名
}
</pre>

<p>其参数说明如下：</p>

<table><tr><th>属性名</th><th>值类型</th><th>说明</th></tr><tr><td>time</td><td>数字</td><td>浮点数，等待的时间，以秒为单位。</td></tr><tr><td>click</td><td>布尔值</td><td>是否等待鼠标点击。</td></tr><tr><td>component</td><td>字符串</td><td>等待鼠标点击的组件名。</td></tr></table>

<hr>

<h3 id="part_7">退出</h3>

<p>退出程序的方法除了点击右上角的“X”外，还可以执行 @exit 命令。</p>

<p>@exit 的格式如下：</p>

<pre class="brush: ks">
// 完整参数列表（无参数）
@exit;
</pre>

<p>当程序执行到此命令，将直接退出程序。</p>

<hr>

<h3 id="part_8">示例</h3>

<p>请下载对应版本的<a href="download.html">示例</a>进行查看。</p>

<hr>

<p><a href="tutorial_2.html">上一节：初识 KScript</a></p>

<p><a href="tutorial_4.html">下一节：进阶指令（UI特效）</a></p>

			</div>
		</div>
	</div>
	<!-- /.container -->

	<div role="contentinfo" class="footer">
		<div class="container copyright">
			<p>Copyright &copy; 2011-2014 <a href="http://www.sprabbit.com/">SPRABBIT</a></p>
			<p>Designed by <a href="http://kennethj.lofter.com/">Kenneth.J</a>. Built with <a href="http://getbootstrap.com/">Bootstrap</a>.</p>
		</div>
	</div>
</body>




<script src="http://cdn.bootcss.com/jquery/1.11.1/jquery.min.js"></script>
<script src="http://cdn.bootcss.com/bootstrap/3.2.0/js/bootstrap.min.js"></script>


<script type="text/javascript" src="/js/shCore.js"></script>

<script type="text/javascript" src="/js/shBrushXML.js"></script>

<script type="text/javascript" src="/js/shBrushKScript.js"></script>

<script type="text/javascript" src="/js/highlight.js"></script>

<script type="text/javascript" src="/js/spengine/nav_collapse.js"></script>

<script type="text/javascript" src="/js/baidu_tongji.js"></script>

</html>
